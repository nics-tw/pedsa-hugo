<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>PEDSA 安裝教學 on PEDSA</title><link>https://nics-tw.github.io/pedsa-hugo/zh/docs/chapter1/</link><description>Recent content in PEDSA 安裝教學 on PEDSA</description><generator>Hugo</generator><language>zh</language><atom:link href="https://nics-tw.github.io/pedsa-hugo/zh/docs/chapter1/index.xml" rel="self" type="application/rss+xml"/><item><title>安裝流程</title><link>https://nics-tw.github.io/pedsa-hugo/zh/docs/chapter1/install/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://nics-tw.github.io/pedsa-hugo/zh/docs/chapter1/install/</guid><description>&lt;p>本系統手冊將描述如何在 Linux Ubuntu 系統上利用 docker 部署微服務架構，進而組成 PEDSA 系統。安裝的流程如圖 3:&lt;/p>
&lt;p>
 &lt;img src="%e4%bb%a5%e5%be%8c%e8%a3%9c" alt="部署流程圖" /> TODO:&lt;/p>
&lt;p>系統環境資源建議：此步驟會依據基準資料列出所需的主機的基本需求，導入機關再依據需求的資料量、分析案例規模彈性調整主機的硬體資源。&lt;/p>
&lt;p>執行環境安裝:在主機上安裝 docker 執行環境，建置 docker 網路及安裝 PEDSA 應用程式。&lt;/p>
&lt;p>PEDSA 啟動:會介紹如何啟動服務端及使用端系統，詳細的內容於&amp;quot;前置作業及軟硬體介紹&amp;quot;章節解說。&lt;/p>
&lt;h1 id="安裝前置作業及軟硬體介紹">
 安裝前置作業及軟硬體介紹
 &lt;a class="anchor" href="#%e5%ae%89%e8%a3%9d%e5%89%8d%e7%bd%ae%e4%bd%9c%e6%a5%ad%e5%8f%8a%e8%bb%9f%e7%a1%ac%e9%ab%94%e4%bb%8b%e7%b4%b9">#&lt;/a>
&lt;/h1>
&lt;h2 id="系統環境資源建議">
 系統環境資源建議
 &lt;a class="anchor" href="#%e7%b3%bb%e7%b5%b1%e7%92%b0%e5%a2%83%e8%b3%87%e6%ba%90%e5%bb%ba%e8%ad%b0">#&lt;/a>
&lt;/h2>
&lt;p>導入機關選擇硬體規格時，可參考表 1 的基準資料及表 2的硬體資訊:&lt;/p>
&lt;p>表1: 基準資料特徵&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>資料筆數&lt;/th>
 &lt;th>預估大小&lt;/th>
 &lt;th>欄位&lt;/th>
 &lt;th>直接識別&lt;/th>
 &lt;th>間接識別&lt;/th>
 &lt;th>敏感欄位&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>1,000,000&lt;/td>
 &lt;td>1G&lt;/td>
 &lt;td>15&lt;/td>
 &lt;td>2&lt;/td>
 &lt;td>6&lt;/td>
 &lt;td>4&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;p>表2: 建議之硬體資源&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>最低需求&lt;/th>
 &lt;th>CPU(core)&lt;/th>
 &lt;th>RAM(GB)&lt;/th>
 &lt;th>Storage(GB)&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>K匿名&lt;/td>
 &lt;td>8&lt;/td>
 &lt;td>16&lt;/td>
 &lt;td>1024&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>合成資料&lt;/td>
 &lt;td>8&lt;/td>
 &lt;td>32&lt;/td>
 &lt;td>512&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>差分隱私&lt;/td>
 &lt;td>4&lt;/td>
 &lt;td>16&lt;/td>
 &lt;td>256&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;p>PEDSA 建議於 Linux Ubuntu 22.04 LTS 版本進行安裝。表 1 及表 2 的推論過程放在附錄的&amp;quot;環境評估資源&amp;quot;段落，方便導入機關做進一步探討。&lt;/p></description></item><item><title>網路設定</title><link>https://nics-tw.github.io/pedsa-hugo/zh/docs/chapter1/network/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://nics-tw.github.io/pedsa-hugo/zh/docs/chapter1/network/</guid><description>&lt;h1 id="docker-介紹與-docker-環境建置">
 Docker 介紹與 Docker 環境建置
 &lt;a class="anchor" href="#docker-%e4%bb%8b%e7%b4%b9%e8%88%87-docker-%e7%92%b0%e5%a2%83%e5%bb%ba%e7%bd%ae">#&lt;/a>
&lt;/h1>
&lt;p>如前所述(執行環境安裝的 step2)，進入 dockerd-src 目錄，執行&lt;code>source create_docker_env.sh&lt;/code>, 就可以安裝 docker 並建立 docker network，安裝的過程中，需輸入主機使用者密碼，此使用者須有 sudo 權限，才可以正確安裝。正確安裝後，可以顯示 docker 版本資訊，如圖 5 所示&lt;/p>
&lt;p>
 &lt;img src="%e4%b9%8b%e5%be%8c%e8%a3%9c" alt="圖5: docker版本" />&lt;/p>
&lt;p>若 create_docker_env.sh 正常完成，停留在圖 6 的畫面，按下Ctrl+c 即可跳出。&lt;/p>
&lt;p>![圖6: 正確的docker狀態]&lt;/p>
&lt;h1 id="pedsa-啟動注意事項及各服務說明">
 PEDSA 啟動注意事項及各服務說明
 &lt;a class="anchor" href="#pedsa-%e5%95%9f%e5%8b%95%e6%b3%a8%e6%84%8f%e4%ba%8b%e9%a0%85%e5%8f%8a%e5%90%84%e6%9c%8d%e5%8b%99%e8%aa%aa%e6%98%8e">#&lt;/a>
&lt;/h1>
&lt;p>啟動系統前，需先確認表 6 所列的通訊埠(port)是否開通:&lt;/p>
&lt;p>表5: 服務端需要開通的通訊埠&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>通訊埠號&lt;/th>
 &lt;th>說明&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>22&lt;/td>
 &lt;td>服務端與使用端登入連線用&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>11016&lt;/td>
 &lt;td>服務端 API 通訊埠&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>443&lt;/td>
 &lt;td>服務端 SSL 通訊埠&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>11100&lt;/td>
 &lt;td>資料庫&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>6922&lt;/td>
 &lt;td>服務端 Hadoop&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>5922&lt;/td>
 &lt;td>K 匿名與使用端 Hadoop&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>5088&lt;/td>
 &lt;td>合成 API&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>5915&lt;/td>
 &lt;td>K匿名與使用端API&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>5090&lt;/td>
 &lt;td>差分API&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;p>如前所述(執行環境安裝的 step4)，經由 step4 步驟啟動後，會產生 PETWEB 、 PETservice 、 PET_join 、 PETSHadoop 、PETSWebservice、pets_dp 及 pets_syn 等 7 個 docker 服務叢集，可執行&lt;code>docker stack ls&lt;/code> 得到相關資訊。服務端系統的服務如下表內容:&lt;/p></description></item><item><title>FAQ</title><link>https://nics-tw.github.io/pedsa-hugo/zh/docs/chapter1/faq/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://nics-tw.github.io/pedsa-hugo/zh/docs/chapter1/faq/</guid><description>&lt;h1 id="當系統安裝好如何確認系統是否正常啟動">
 當系統安裝好，如何確認系統是否正常啟動?
 &lt;a class="anchor" href="#%e7%95%b6%e7%b3%bb%e7%b5%b1%e5%ae%89%e8%a3%9d%e5%a5%bd%e5%a6%82%e4%bd%95%e7%a2%ba%e8%aa%8d%e7%b3%bb%e7%b5%b1%e6%98%af%e5%90%a6%e6%ad%a3%e5%b8%b8%e5%95%9f%e5%8b%95">#&lt;/a>
&lt;/h1>
&lt;p>通常可以執行 `docker ps -a```，觀察是否有出現錯誤訊息時出現的錯誤，多為 docker 設定出錯，例如容器目錄與外部主機原有的對應關係無法滿足，或是 docker 映像檔版本不合等。&lt;/p>
&lt;p>當 docker 容器都正常啟動，但 PEDSA 行 &lt;code>docker logs fastapi&lt;/code>，fastapi 是容器名稱，此容器負責前後端的控制流程，可以觀察到哪一個服務出錯，其他的容器名稱可以由 &lt;code>docker ps -a&lt;/code> 指令查詢，容器名稱出現在最後一個欄位，如下圖的 NAMES 欄位。&lt;/p>
&lt;p>
 &lt;img src="%e8%a3%9c%e5%9c%96" alt="圖12: PEDSA容器名稱" />&lt;/p>
&lt;h1 id="以瀏覽器開啟-pedsa-網頁沒有反映需如何處理">
 以瀏覽器開啟 PEDSA 網頁沒有反映需如何處理?
 &lt;a class="anchor" href="#%e4%bb%a5%e7%80%8f%e8%a6%bd%e5%99%a8%e9%96%8b%e5%95%9f-pedsa-%e7%b6%b2%e9%a0%81%e6%b2%92%e6%9c%89%e5%8f%8d%e6%98%a0%e9%9c%80%e5%a6%82%e4%bd%95%e8%99%95%e7%90%86">#&lt;/a>
&lt;/h1>
&lt;p>遇到此情況，執行&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>docker service logs pets_syn_nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>觀察是否出錯，nginx 的功能是代轉容器流量，因此有任
何一個容器出錯，均會讓 nginx 無法啟動。除此，也可以
向機房管理員查詢防火牆是否開放表 5 所列的通訊埠。&lt;/p>
&lt;h1 id="當-fastapi-無法連上-mariadb要如何處理">
 當 fastapi 無法連上 MariaDB，要如何處理?
 &lt;a class="anchor" href="#%e7%95%b6-fastapi-%e7%84%a1%e6%b3%95%e9%80%a3%e4%b8%8a-mariadb%e8%a6%81%e5%a6%82%e4%bd%95%e8%99%95%e7%90%86">#&lt;/a>
&lt;/h1>
&lt;p>執行&lt;code>docker ps -a&lt;/code>查詢 MariaDB的容器名稱，再執行&lt;code>docker logs $MariaDB_container_name&lt;/code>
觀察資料庫是否正常運作，正常會出現&amp;quot; mysqld: ready for connections. &amp;ldquo;訊息。&lt;/p>
&lt;p>若有出錯，可執行&lt;code>ls -al ~/PETS/pets_hadoop/pets_v1/sourceCode/hadoop/MariaDBdata/&lt;/code> ,觀察的擁有者是否為 999:999，若否，則執行&lt;code>sudo chown -R 999:999 ~/PETS/pets_hadoop/pets_v1/sourceCode/hadoop/MariaDBdata/&lt;/code>&lt;/p></description></item></channel></rss>